
import streamlit as st

FORM_TITLE = "–õ–∏–¥-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (LM): –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞"
TRIGGER_CHANNEL = "–£–∫–∞–∂–∏—Ç–µ –∫–∞–Ω–∞–ª –¥–ª—è –¥–æ—Å—Ç—É–ø–∞:"
TRIGGER_ROLE = "–£–∫–∞–∂–∏—Ç–µ —Ä–æ–ª—å:"

channels = [
    "–ì–ê–ü","–ì–ü–û","–ù–ü–°","–ù–î–°","–ì–ü–•","–ò–¢–ú","B2G","–°—Ä–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç",
    "–û–ö–ù","3–ö","–ü–î–ó –∏ –õ–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ","–ü—Ä–æ—Ü–µ—Å—Å –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏/—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏",
    "–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–æ–ª—å (–ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à—É –≤ –ø–æ–ª–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)",
]

channel_descriptions = {
    "–ì–ê–ü": "–ì—Ä—É–ø–ø–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂, —Ü–µ–ª—å—é –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–¥–∞–∂–∞ —É—Å–ª—É–≥ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º–∞. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –æ—Ñ–æ—Ä–º–ª—è—é—Ç—Å—è –≤ —à—Ç–∞—Ç.",
    "–ì–ü–û": "–ì—Ä—É–ø–ø–∞ –ø—Ä–æ–¥–∞–∂ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è, —Ü–µ–ª—å—é –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ —Å –¥–µ–π—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º–∞ (–ø—Ä–æ–¥–∞–∂–∞ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –¥–æ–ø—Ä–æ–¥–∞–∂–∞ –¥–æ–ø. —É—Å–ª—É–≥ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–∞–º, —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∫–ª–∏–µ–Ω—Ç–∞)",
    "–ù–ü–°": "–ì—Ä—É–ø–ø–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ª–æ—è–ª—å–Ω–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ü–µ–ª—å—é –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç—Ç–æ–∫–∞ –∏ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Ç—ë–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–∫–∏–¥–æ–∫ –Ω–∞ —É—Å–ª—É–≥–∏ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º–∞ –∏–ª–∏ –ø–æ–º–æ—â—å –≤ —Ä–µ—à–µ–Ω–∏–∏ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ–±–ª–µ–º",
    "–ù–î–°": "–ì—Ä—É–ø–ø–∞ –ù–î–° ‚Äì —ç—Ç–æ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–∏—Å—É, —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–∏—Å—É –∏ —Ä–∞–∑–≤–∏—Ç–∏—é –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è.",
    "–ì–ü–•": "–ì—Ä—É–ø–ø–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂, —Ü–µ–ª—å—é –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–¥–∞–∂–∞ —É—Å–ª—É–≥ –†–æ—Å—Ç–µ–ª–µ–∫–æ–º–∞. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –æ—Ñ–æ—Ä–º–ª—è—é—Ç—Å—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É (—Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ –ì–ü–• –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–æ–π –≤—ã–±–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞ –ì–ü–•, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±–∏—Ä–∞—Ç—å –∫–∞–Ω–∞–ª –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –≥—Ä—É–ø–ø–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —Å –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å) ",
    "–ò–¢–ú": "–ì—Ä—É–ø–ø–∞ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç–µ–ª–µ–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞. –í —ç—Ç–æ–º –∫–∞–Ω–∞–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ù–û–î ‚Äì –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ ‚Äì –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ª–∏–¥–æ–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, –æ–±—Ä–∞—Ç–∏–≤—à–∏—Ö—Å—è –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º: —Å–∞–π—Ç RT.RU, –∑–≤–æ–Ω–æ–∫ –≤ –∫–æ–Ω—Ç–∞–∫—Ç-—Ü–µ–Ω—Ç—Ä –ü–ê–û –†–æ—Å—Ç–µ–ª–µ–∫–æ–º, –õ–ö –Æ–õ –∏ –ø—Ä.",
    "B2G": "–ì—Ä—É–ø–ø–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –ü–ì",
    "–°—Ä–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç": "–†–∞–∑–¥–µ–ª –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–∞–Ω–∞–ª–∞ –ì–ü–û, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —Å—Ä–µ–¥–Ω–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏, –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤–µ–¥–µ–Ω–∏–µ –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞, –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂. –î–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ —Ç–∞–∫ –∂–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø –≤ –∫–∞–Ω–∞–ª–µ –ì–ü–û.",
    "–û–ö–ù": "–†–∞–∑–¥–µ–ª –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–∞–Ω–∞–ª–∞ –û–ö–ù–ù, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏",
    "3–ö": "–í —ç—Ç–æ–º –∫–∞–Ω–∞–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç 3–ö ‚Äì –ö—Ä—É–ø–Ω—ã–µ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ö–ª–∏–µ–Ω—Ç—ã ‚Äì –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ª–∏–¥–æ–≤ –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞",
    "–ü–î–ó –∏ –õ–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ": "–ì—Ä—É–ø–ø–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–π –¥–µ–±–∏—Ç–æ—Ä—Å–∫–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é, —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –∏ –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏. –î–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ —Ç–∞–∫ –∂–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø –≤ –∫–∞–Ω–∞–ª–µ –ì–ü–û.",
    "–ü—Ä–æ—Ü–µ—Å—Å –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏/—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏": "–ì—Ä—É–ø–ø–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–º–ø–∞–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏/—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏. –° —Ç–∞–∫–∏–º–∏ –ö–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–∑–∞–∫–ª—é—á–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä –∏–ª–∏ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –ö–ª–∏–µ–Ω—Ç—É —Å—Ç–∞—Ç—É—Å ¬´–õ–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω¬ª. –î–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ —Ç–∞–∫ –∂–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø –≤ –∫–∞–Ω–∞–ª–µ –ì–ü–û.",
    "–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–æ–ª—å (–ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à—É –≤ –ø–æ–ª–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)": "–ì—Ä—É–ø–ø–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–π –¥–µ–±–∏—Ç–æ—Ä—Å–∫–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å—é, —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –∏ –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏. –î–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ä–æ–ª–∏ —Ç–∞–∫ –∂–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø –≤ –∫–∞–Ω–∞–ª–µ –ì–ü–û.",
}

roles_general = ["–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å","–ì—Ä—É–ø–ø-–ª–∏–¥–µ—Ä","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –†–§","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –†–î","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶"]
role_texts_general = {
    "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –Ω–∞ –Ω–∏—Ö –ª–∏–¥–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –ø–æ–∑–∏—Ü–∏—è–º–∏ –ü–ì.  –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –∫–∞–Ω–∞–ª–µ.",
    "–ì—Ä—É–ø–ø-–ª–∏–¥–µ—Ä": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑–Ω–∞—á–∞—é—Ç –ª–∏–¥—ã  –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é –ø–æ —Å–≤–æ–∏–º –≥—Ä—É–ø–ø–∞–º, –∞ —Ç–∞–∫ –∂–µ –º–æ–≥—É—Ç —Å–∞–º–∏ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è. –ì—Ä—É–ø–ø-–ª–∏–¥–µ—Ä –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –∫–∞–Ω–∞–ª–µ",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –∫–∞–Ω–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑–Ω–∞—á–∞—é—Ç –ª–∏–¥—ã  –Ω–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é, –∞ —Ç–∞–∫ –∂–µ –º–æ–≥—É—Ç —Å–∞–º–∏ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –∫–∞–Ω–∞–ª–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –†–§": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–¥–æ–≤ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—É—é –æ—Ç—Ä–∞–±–æ—Ç–∫—É. –†–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é.  –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –†–§ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –∫–∞–Ω–∞–ª–∞–º. –£—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≤–µ–¥–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –†–§.",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –†–î": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–¥–æ–≤ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—É—é –æ—Ç—Ä–∞–±–æ—Ç–∫—É. –†–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –†–î, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –†–î –≤ –ø—Ä–æ—Ñ–∏–ª–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –†–î",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–¥–æ–≤ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—É—é –æ—Ç—Ä–∞–±–æ—Ç–∫—É. –†–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ö–¶, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é. –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –ö–¶ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤",
}

roles_okn = ["–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å","–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –û–ö–ù","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –†–î","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶"]
role_texts_okn = {
    "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –Ω–∞ –Ω–∏—Ö –æ–±—ä–µ–∫—Ç–∞–º–∏ –û–ö–ù.",
    "–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –û–ö–ù": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –û–ö–ù. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –û–ö–ù, –≥–¥–µ –æ–Ω –∑–∞–∫—Ä–µ–ø–ª–µ–Ω –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –û–ö–ù, —Å—Ç–∞—Ç—É—Å –æ–±—ä–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∞—Ç—å –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –∫–∞–Ω–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑–Ω–∞—á–∞—é—Ç –æ–±—ä–µ–∫—Ç—ã –û–ö–ù –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é, –∞ —Ç–∞–∫ –∂–µ –º–æ–≥—É—Ç —Å–∞–º–∏ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è.",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –†–î": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –û–ö–ù –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—É—é –æ—Ç—Ä–∞–±–æ—Ç–∫—É. –†–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é.",
    "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶": "–î–∞–Ω–Ω–∞—è —Ä–æ–ª—å –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –û–ö–ù –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—É—é –æ—Ç—Ä–∞–±–æ—Ç–∫—É. –†–æ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π –Ω–∞ —É—Ä–æ–≤–Ω–µ –ö–¶, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é.",
}

roles_with_extra_general = {"–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –†–§","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –†–î","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶"}
roles_with_extra_okn = {"–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶"}
extra_channel_options = ["–ì–ê–ü","–ì–ü–û","–ù–ü–°","–ù–î–°","–ì–ü–•","–ò–¢–ú","B2G","–°—Ä–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç","–ü–î–ó –∏ –õ–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ","–ü—Ä–æ—Ü–µ—Å—Å –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏/—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏"]

RD_LIST = ["–†–î –¶–µ–Ω—Ç—Ä","–†–î –°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥","–†–î –í–æ–ª–≥–∞","–†–î –Æ–≥","–†–î –£—Ä–∞–ª","–†–î –°–∏–±–∏—Ä—å","–†–î –î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫","–†–î –ú–æ—Å–∫–≤–∞ –∏ –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"]
RF_BRANCHES = ["–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–ë—Ä—è–Ω—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–ö–∞–ª—É–∂—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–ö–∞–º—á–∞—Ç—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–ê–º—É—Ä—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª","–§–∏–ª–∏–∞–ª –°–∞—Ö–∞—Ç–µ–ª–µ–∫–æ–º","–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª"]

CHANNELS_DIRECT_RD = {"–ò–¢–ú","3–ö","–û–ö–ù","–ù–î–°","–ù–ü–°"}

st.set_page_config(page_title=FORM_TITLE, page_icon="üß©", layout="centered")
st.title(FORM_TITLE)

# State
if "extra_channels" not in st.session_state: st.session_state.extra_channels = []
if "prev_role" not in st.session_state: st.session_state.prev_role = None
if "prev_channel" not in st.session_state: st.session_state.prev_channel = None
if "extra_rd" not in st.session_state: st.session_state.extra_rd = []   # stores list of selected extra RD values (or None)
if "level_select" not in st.session_state: st.session_state.level_select = None

# Channel
channel = st.selectbox(TRIGGER_CHANNEL, channels, index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª", key="main_channel")

# Reset on change
if channel != st.session_state.prev_channel:
    st.session_state.prev_channel = channel
    st.session_state.extra_channels = []
    st.session_state.extra_rd = []
    st.session_state.role_select = None
    st.session_state.level_select = None
    for k in ["gpo_mid","gpo_pdz","gpo_proc"]:
        st.session_state[k] = False

# Description
if channel:
    desc = channel_descriptions.get(channel)
    if desc: st.info(desc)

# GPO extras
if channel == "–ì–ü–û":
    st.write("–î–ª—è –æ—Å—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ì–ü–û –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã:")
    c1,c2,c3 = st.columns(3)
    with c1: st.checkbox("–°—Ä–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç", key="gpo_mid")
    with c2: st.checkbox("–ü–î–ó –∏ –õ–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ", key="gpo_pdz")
    with c3: st.checkbox("–ü—Ä–æ—Ü–µ—Å—Å –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏/—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏", key="gpo_proc")

# Roles
selected_role = None
roles_list = []
role_texts_map = {}
roles_with_extra = set()

if channel:
    if channel == "–û–ö–ù":
        roles_list = roles_okn; role_texts_map = role_texts_okn; roles_with_extra = roles_with_extra_okn
    elif channel == "–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–æ–ª—å (–ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à—É –≤ –ø–æ–ª–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)":
        roles_list = []; role_texts_map = {}; roles_with_extra = set()
    else:
        roles_list = roles_general; role_texts_map = role_texts_general; roles_with_extra = roles_with_extra_general

    if roles_list:
        selected_role = st.selectbox(TRIGGER_ROLE, roles_list, index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å", key="role_select")

        if selected_role != st.session_state.prev_role:
            st.session_state.prev_role = selected_role
            st.session_state.extra_channels = []
            st.session_state.extra_rd = []

        if selected_role:
            st.markdown("**–û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏**")
            st.write(role_texts_map[selected_role])

            if selected_role in roles_with_extra:
                if st.button("–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª"):
                    st.session_state.extra_channels.append(None)

                st.write("")
                to_remove = []
                for i,_ in enumerate(st.session_state.extra_channels):
                    st.markdown(f"**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª #{i+1}**")
                    sel_col, btn_col = st.columns([6,1], vertical_alignment="bottom")
                    with sel_col:
                        st.session_state.extra_channels[i] = st.selectbox(
                            "",
                            extra_channel_options,
                            index=None,
                            placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª",
                            key=f"extra_channel_{i}",
                            label_visibility="collapsed"
                        )
                    with btn_col:
                        st.write("")
                        if st.button("–£–¥–∞–ª–∏—Ç—å", key=f"del_extra_channel_{i}"):
                            to_remove.append(i)
                for idx in reversed(to_remove):
                    del st.session_state.extra_channels[idx]

# Region logic (hidden for '–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶')
hide_regions = (selected_role == "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –ö–¶")

selected_rd = None; selected_level = None; selected_rf_branch = None

if not hide_regions and channel:
    if channel in CHANNELS_DIRECT_RD:
        selected_rd = st.selectbox("–£–∫–∞–∂–∏—Ç–µ –†–î –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –£–ó:", RD_LIST, index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –†–î", key="rd_direct")
    else:
        selected_level = st.selectbox("–£—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ:", ["–†–§ (–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–ª–∏–∞–ª)","–†–î (–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ü–∏—è)"], index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å", key="level_select")
        if selected_level == "–†–§ (–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–ª–∏–∞–ª)":
            selected_rf_branch = st.selectbox("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª –†–§:", RF_BRANCHES, index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª", key="rf_branch")
        elif selected_level == "–†–î (–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ü–∏—è)":
            selected_rd = st.selectbox("–í—ã–±–µ—Ä–∏—Ç–µ –†–î:", RD_LIST, index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –†–î", key="rd_level")
            # Add extra RD button for specific roles
            if selected_role in {"–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–∞","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –†–§","–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –∫–∞–Ω–∞–ª–æ–≤ –†–î"}:
                if st.button("–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –†–î"):
                    st.session_state.extra_rd.append(None)
                st.write("")
                to_remove_rd = []
                for i,_ in enumerate(st.session_state.extra_rd):
                    st.markdown(f"**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –†–î #{i+1}**")
                    sel_col, btn_col = st.columns([6,1], vertical_alignment="bottom")
                    with sel_col:
                        st.session_state.extra_rd[i] = st.selectbox(
                            "",
                            RD_LIST,
                            index=None,
                            placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –†–î",
                            key=f"extra_rd_{i}",
                            label_visibility="collapsed"
                        )
                    with btn_col:
                        st.write("")
                        if st.button("–£–¥–∞–ª–∏—Ç—å", key=f"del_extra_rd_{i}"):
                            to_remove_rd.append(i)
                for idx in reversed(to_remove_rd):
                    del st.session_state.extra_rd[idx]

# Bottom fields
st.divider()
add_info_required = (channel == "–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–æ–ª—å (–ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à—É –≤ –ø–æ–ª–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)")
add_info_label = "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:" + (" *" if add_info_required else "")
add_info = st.text_area(add_info_label, height=140, key="extra_info")
contact_method = st.selectbox("–£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Ç—Å–≤–∏—è:", ["–ú–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω","–ü–æ—á—Ç–∞"], index=None, placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±", key="contact_method")

# Submit
st.divider()
if st.button("–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É"):
    errors = []
    if not channel: errors.append("–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª")
    if channel and channel != "–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–æ–ª—å (–ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à—É –≤ –ø–æ–ª–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)" and not selected_role:
        errors.append("–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å")

    if not hide_regions and channel:
        if channel in CHANNELS_DIRECT_RD:
            if selected_rd is None: errors.append("–í—ã–±–µ—Ä–∏—Ç–µ –†–î")
        else:
            if not selected_level: errors.append("–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å (–†–§/–†–î)")
            else:
                if selected_level.startswith("–†–§") and not selected_rf_branch: errors.append("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª –†–§")
                if selected_level.startswith("–†–î") and selected_rd is None: errors.append("–í—ã–±–µ—Ä–∏—Ç–µ –†–î")

    if add_info_required and not (add_info or "").strip(): errors.append("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ ¬´–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è¬ª")
    if not contact_method: errors.append("–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è")

    if errors:
        st.error("\n".join("‚Ä¢ "+e for e in errors))
    else:
        payload = {
            "–ö–∞–Ω–∞–ª": channel,
            "–†–æ–ª—å": selected_role,
            "–î–æ–ø. –∫–∞–Ω–∞–ª—ã (–∫–Ω–æ–ø–∫–∞)": [c for c in st.session_state.extra_channels if c],
            "–ì–ü–û: –¥–æ–ø. –∫–∞–Ω–∞–ª—ã (—á–µ–∫–±–æ–∫—Å—ã)": {
                "–°—Ä–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç": st.session_state.get("gpo_mid", False),
                "–ü–î–ó –∏ –õ–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ": st.session_state.get("gpo_pdz", False),
                "–ü—Ä–æ—Ü–µ—Å—Å –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏/—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏": st.session_state.get("gpo_proc", False),
            } if channel == "–ì–ü–û" else None,
            "–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å": None if hide_regions else {
                "–¢–∏–ø –≤—ã–±–æ—Ä–∞": ("–†–î –ø—Ä—è–º–æ–π" if channel in CHANNELS_DIRECT_RD else selected_level),
                "–†–î (–æ—Å–Ω–æ–≤–Ω–æ–π)": selected_rd,
                "–§–∏–ª–∏–∞–ª –†–§": selected_rf_branch,
                "–î–æ–ø. –†–î": [r for r in st.session_state.extra_rd if r],
            },
            "–î–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è": (add_info or "").strip(),
            "–ö–æ–Ω—Ç–∞–∫—Ç": contact_method,
        }
        st.success("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (–¥–µ–º–æ).")
        st.json(payload)
